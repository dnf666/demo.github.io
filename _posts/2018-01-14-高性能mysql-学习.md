---
layout:     post
title:      高性能mysql
subtitle:   mysql
date:       2018-01-14
author:     戴林甫
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - mysql
    - 高性能
---

## 1.1 mysql逻辑架构

![image](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1515920441646&di=28b6f12f4b8c457fed3d4ffff4996c0e&imgtype=0&src=http%3A%2F%2Fimages.cnitblog.com%2Fi%2F610272%2F201403%2F181504216774184.jpg)

## 1.2 mysql的并发控制
    mysql并发控制主要在两个层面，服务器层和存储引擎层面
###1.2.1读写锁
    解决并发控制的经典做法是：通过共享锁（读锁）和排他锁（写锁），写锁会阻塞其他的写锁和读锁
###1.2.2锁粒度    
    锁的策略就是在安全性和锁的开销之间的平衡性。锁的开销主要有获得锁、检查锁、释放锁，锁的粒度的问题
    
    mysql提供两种粒度的锁：表锁，行级锁
    
    表锁 ：锁住整张表，开销最小，并发处理程度低。服务器和存储引擎都实现
    行级锁：锁住行，开销最大，并发处理程度最高。只实现存储引擎
### 1.3 事务
    事务：一组原子性的sql查询 具有acid特性
    原子性：一个事务是不可分割的最小工作单位，要么整个成功，要么就全部回滚
    一致性：数据库总是从一个一致的状态到另一个一致的状态
    隔离性：在最终提交之前，该事务的操作对其他事务是不可见的
    持久性：所做的修改是永久保存到数据库中的，即使系统崩溃也不会丢失数据
    
    事务增加了系统安全性，但是也造成了数据库需要更强的cpu处理能力，更大的磁盘，更大的内存，
    用户可以选择是否需要事务处理，来提高系统的性能。即使没有事务，也可以用lock table
    为应用提供一定程度的保护
    
    
    

